# traefik-values.yaml
replicas: 1

service:
  type: LoadBalancer
  loadBalancerIP: "192.168.45.99"  # IP MetalLB
  ports:
    web:
      port: 80
    websecure:
      port: 443

providers:
  kubernetesCRD: {}
  kubernetesIngress: {}

entryPoints:
  web:
    address: ":80"
  websecure:
    address: ":443"

certificatesResolvers:
  cloudflare:
    acme:
      email: "admin@vrhometech.fr" # ton email pour Letâ€™s Encrypt
      storage: /acme.json
      dnsChallenge:
        provider: cloudflare
        delayBeforeCheck: 0
        resolvers: []

persistence:
  enabled: true
  path: /acme.json
  size: 1Mi
  accessMode: ReadWriteOnce
  storageClass: ""
additionalArguments:
  - "--log.level=INFO"

env:
  - name: CF_DNS_API_TOKEN
    valueFrom:
      secretKeyRef:
        name: cloudflare-api-token-secret
        key: CF_API_TOKEN

dashboard:
  enabled: true
  ingressRoute:
    dashboard: true

apiVersion: v1
kind: PersistentVolume
metadata:
  name: traefik-acme-pv

